# é£ä¹¦çŸ¥è¯†åº“è‡ªåŠ¨å¯¼å…¥å™¨

<p align="center">
  <img src="assets/logo.png" alt="é¡¹ç›® Logo" width="500">
</p>

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Tests](https://img.shields.io/badge/Tests-15%20passed-brightgreen.svg)](tests/)
[![Coverage](https://img.shields.io/badge/Coverage-Coming%20soon-yellow.svg)](tests/)

å°†æœ¬åœ°ç›®å½•æˆ– GitHub ä»“åº“ä¸­çš„æ–‡æ¡£å¯¼å…¥é£ä¹¦äº‘æ–‡æ¡£ï¼Œå¹¶å¯å†™å…¥çŸ¥è¯†åº“ã€‚æœ¬åœ°æºæ”¯æŒ Markdown ä¸ DOCXï¼ˆDOCX é€šè¿‡ Pandoc è½¬æ¢ä¸º Markdown åå¯¼å…¥ï¼‰ã€‚

## ğŸš€ é¡¹ç›®ç®€ä»‹

é£ä¹¦çŸ¥è¯†åº“è‡ªåŠ¨å¯¼å…¥å™¨æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ–‡æ¡£è¿ç§»å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·å°†æœ¬åœ°æ–‡æ¡£æˆ– GitHub ä»“åº“ä¸­çš„å†…å®¹å¿«é€Ÿã€é«˜æ•ˆåœ°å¯¼å…¥åˆ°é£ä¹¦äº‘æ–‡æ¡£æˆ–çŸ¥è¯†åº“ä¸­ã€‚è¯¥å·¥å…·æ”¯æŒå¤šç§æ•°æ®æºå’Œå†™å…¥æ¨¡å¼ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### æ•°æ®æºæ”¯æŒ
- **æœ¬åœ°ç›®å½•**ï¼šæ”¯æŒ `.md`ã€`.markdown` å’Œ `.docx` æ–‡ä»¶
- **GitHub ä»“åº“**ï¼šç›´æ¥å¯¼å…¥ GitHub ä»“åº“ä¸­çš„ Markdown æ–‡æ¡£
- **æ™ºèƒ½è½¬æ¢**ï¼šDOCX æ–‡ä»¶é€šè¿‡ Pandoc è‡ªåŠ¨è½¬æ¢ä¸º Markdown æ ¼å¼

### å†™å…¥æ¨¡å¼
- **äº‘ç›˜æ–‡ä»¶å¤¹**ï¼šå°†æ–‡æ¡£å†™å…¥é£ä¹¦äº‘ç›˜æŒ‡å®šæ–‡ä»¶å¤¹
- **çŸ¥è¯†åº“**ï¼šå°†æ–‡æ¡£å†™å…¥é£ä¹¦çŸ¥è¯†åº“ï¼ˆéœ€ OAuth æˆæƒï¼‰
- **åŒæ—¶å†™å…¥**ï¼šæ”¯æŒåŒæ—¶å†™å…¥äº‘ç›˜æ–‡ä»¶å¤¹å’ŒçŸ¥è¯†åº“

### å…³é”®ç‰¹æ€§
âœ… **OAuth æˆæƒ**ï¼šæ”¯æŒæœ¬åœ°å›è°ƒè‡ªåŠ¨æˆæƒå’Œæ‰‹åŠ¨æˆæƒç ä¸¤ç§æ–¹å¼
âœ… **å®¹é”™æœºåˆ¶**ï¼šæŒ‰æ–‡ä»¶ç²’åº¦å¤±è´¥ä¸ä¸­æ–­ï¼Œä»»åŠ¡æœ«å°¾ç»Ÿä¸€æ±‡æ€»å¤±è´¥ä¿¡æ¯
âœ… **é€šçŸ¥ç³»ç»Ÿ**ï¼šæ”¯æŒé£ä¹¦æœºå™¨äºº webhook å’Œ chat_id é€šçŸ¥
âœ… **è¡¨æ ¼å¤„ç†ä¼˜åŒ–**ï¼šè‡ªåŠ¨é™çº§ç­–ç•¥é¿å…é£ä¹¦ API å‚æ•°é™åˆ¶
âœ… **Web æ§åˆ¶å°**ï¼šæä¾›ç›´è§‚çš„ Web ç•Œé¢ï¼Œæ”¯æŒæœ¬åœ°ç›®å½•/å•æ–‡ä»¶å¯¼å…¥
âœ… **å¹¶å‘ä¼˜åŒ–**ï¼šæ”¯æŒæ–‡æ¡£çº§å’Œåˆ†ç‰‡çº§å¹¶å‘å¤„ç†
âœ… **è°ƒè¯•æ¨¡å¼**ï¼šæä¾› dry run æ¨¡å¼ï¼ŒéªŒè¯æµç¨‹è€Œä¸å®é™…å†™å…¥

## ğŸ“ ç›®å½•ç»“æ„

```text
â”œâ”€â”€ cli/             # CLI è¾…åŠ©æ¨¡å—
â”œâ”€â”€ config/          # é…ç½®ç®¡ç†
â”œâ”€â”€ core/            # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆç¼–æ’ã€å¼‚å¸¸å¤„ç†ã€bootstrapï¼‰
â”œâ”€â”€ data/            # æ•°æ®æ¨¡å‹ä¸æºé€‚é…å™¨
â”œâ”€â”€ integrations/    # ç¬¬ä¸‰æ–¹ API é›†æˆï¼ˆé£ä¹¦ã€HTTP å®¢æˆ·ç«¯ï¼‰
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°ï¼ˆMarkdown è§£æã€æ–‡æœ¬åˆ†å—ã€HTTPã€æ—¥å¿—ï¼‰
â”œâ”€â”€ web/             # Web API ä¸å‰ç«¯é™æ€èµ„æº
â”œâ”€â”€ tests/           # å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•
â”œâ”€â”€ docs/            # è¯¦ç»†æ–‡æ¡£ä¸ä½¿ç”¨æŒ‡å—
â””â”€â”€ main.py          # CLI å…¥å£ç‚¹
```

## ğŸ”§ ç¯å¢ƒå˜é‡

å‚è€ƒ `.env.example` æ–‡ä»¶é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `FEISHU_WEBHOOK_URL` | é£ä¹¦æœºå™¨äºº webhook åœ°å€ | `https://open.feishu.cn/open-apis/bot/v2/hook/xxx` |
| `FEISHU_APP_ID` | é£ä¹¦åº”ç”¨ ID | `cli_a1b2c3d4e5f6` |
| `FEISHU_APP_SECRET` | é£ä¹¦åº”ç”¨å¯†é’¥ | `abcdef1234567890` |
| `FEISHU_USER_ACCESS_TOKEN` | ç”¨æˆ·è®¿é—®ä»¤ç‰Œ | `u-xxx` |
| `FEISHU_USER_REFRESH_TOKEN` | ç”¨æˆ·åˆ·æ–°ä»¤ç‰Œ | `ur-xxx` |
| `FEISHU_FOLDER_TOKEN` | ç›®æ ‡æ–‡ä»¶å¤¹ token | `fld_xxx` |
| `FEISHU_BASE_URL` | é£ä¹¦ API åŸºç¡€ URL | `https://open.feishu.cn` |

**ğŸ’¡ æç¤º**ï¼š`.env` æ–‡ä»¶å·²åŠ å…¥ `.gitignore`ï¼Œä¸ä¼šè¢«ç‰ˆæœ¬è·Ÿè¸ªã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯

```bash
python main.py -h
```

### åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

#### ğŸ“ æœ¬åœ°ç›®å½• -> äº‘ç›˜æ–‡ä»¶å¤¹

```bash
python main.py \
  --source local \
  --path /path/to/docs \
  --write-mode folder
```

#### ğŸŒ GitHub ä»“åº“ -> äº‘ç›˜æ–‡ä»¶å¤¹

```bash
python main.py \
  --source github \
  --repo BrenchCC/llm-transformer-book \
  --write-mode folder
```

#### âš¡ å¤šè¿›ç¨‹å¯¼å…¥ï¼ˆæ¨èï¼‰

```bash
python main.py \
  --source local \
  --path /path/to/docs \
  --write-mode folder \
  --folder-subdirs \
  --max-workers 3 \
  --chunk-workers 4
```

#### ğŸ“š æœ¬åœ°ç›®å½• -> çŸ¥è¯†åº“

```bash
python main.py \
  --source local \
  --path examples/ai-agent-book/zh \
  --write-mode wiki \
  --space-name "AI Agent å¼€å‘æŒ‡å—" \
  --oauth-local-server
```

#### ğŸ” GitHub å­ç›®å½• -> çŸ¥è¯†åº“

```bash
python main.py \
  --source github \
  --repo BrenchCC/llm-transformer-book \
  --subdir docs/chapter1 \
  --write-mode wiki \
  --space-name "LLM Transformer"
```

#### ğŸ§ª è°ƒè¯•æ¨¡å¼ï¼ˆDry Runï¼‰

```bash
python main.py \
  --source github \
  --repo BrenchCC/LLMs_Thinking_Analysis \
  --write-mode wiki \
  --space-name dry-run \
  --dry-run \
  --notify-level none
```

## ğŸŒ Web æ§åˆ¶å°

### å¯åŠ¨ Web æœåŠ¡

```bash
python web/main.py
```

é»˜è®¤ç›‘å¬ `0.0.0.0:8000`ã€‚

## ğŸ³ Docker è¿è¡Œ

### æ„å»ºé•œåƒ

```bash
docker build -f docker/Dockerfile -t feishu-doc-convertor .
```

### ä½¿ç”¨ Docker Compose

```bash
docker-compose -f ./docker/docker-compose.yml up -d
```

å•ç‹¬å¯åŠ¨æœåŠ¡ï¼š

```bash
docker-compose -f ./docker/docker-compose.yml up -d server
docker-compose -f ./docker/docker-compose.yml up -d cli
```

### Web æ§åˆ¶å°åŠŸèƒ½

- æœ¬åœ°æ–‡ä»¶/ç›®å½•å¯¼å…¥
- GitHub ä»“åº“å¯¼å…¥
- ä»»åŠ¡ç®¡ç†ä¸ç›‘æ§
- ç³»ç»Ÿé…ç½®ç®¡ç†
- ä»»åŠ¡ç»“æœæŸ¥çœ‹

## ğŸ“– è¯¦ç»†æ–‡æ¡£

é¡¹ç›®æä¾›äº†å®Œæ•´çš„è¯¦ç»†æ–‡æ¡£ï¼Œä½äº `docs/guidance/` ç›®å½•ï¼š

- [Web æ§åˆ¶å°ä½¿ç”¨æŒ‡å—](docs/guidance/web-console.md)ï¼šWeb æ§åˆ¶å°çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜
- [OAuth æˆæƒä½¿ç”¨æŒ‡å—](docs/guidance/oauth-guide.md)ï¼šOAuth æˆæƒä½¿ç”¨æŒ‡å—
- [é€šçŸ¥ç³»ç»Ÿ](docs/guidance/notification-system.md)ï¼šé€šçŸ¥ç³»ç»Ÿé…ç½®ä¸ä½¿ç”¨
- [å¹¶å‘è°ƒä¼˜å»ºè®®](docs/guidance/concurrency-tuning.md)ï¼šå¹¶å‘è°ƒä¼˜å»ºè®®
- [å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](docs/guidance/troubleshooting.md)ï¼šå¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
- [å‘½ä»¤è¯­æ³•å’Œå‚æ•°è¯´æ˜](docs/guidance/command-reference.md)ï¼šå‘½ä»¤è¯­æ³•å’Œå‚æ•°è¯¦ç»†è¯´æ˜

## ğŸ“Š æµ‹è¯•å‘½ä»¤

### ä½¿ç”¨ conda ç¯å¢ƒï¼ˆæ¨èï¼‰

é¡¹ç›®ä½¿ç”¨çš„ conda ç¯å¢ƒåç§°æ˜¯ï¼š`knowledge_generator`

```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate knowledge_generator

# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰
conda run -n knowledge_generator python -m unittest discover -s tests -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
conda run -n knowledge_generator python -m pytest tests/test_feishu_api.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
conda run -n knowledge_generator python -m pytest tests/test_feishu_api.py::TestFeishuApiOptimizations -v
```

### ç›´æ¥è¿è¡Œï¼ˆä¸ä½¿ç”¨ condaï¼‰

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰
python -m unittest discover -s tests -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶ï¼ˆpytest å¯é€‰ï¼‰
python -m pytest tests/test_feishu_api.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
python -m pytest tests/test_feishu_api.py::TestFeishuApiOptimizations -v
```

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### ä»£ç é£æ ¼

- **PEP 8 è§„èŒƒ**ï¼šä½¿ç”¨ `flake8` è¿›è¡Œä»£ç æ£€æŸ¥
- **ç±»å‹æ³¨è§£**ï¼šæ¨èä½¿ç”¨ç±»å‹æ³¨è§£
- **æ–‡æ¡£å­—ç¬¦ä¸²**ï¼šå‡½æ•°å®šä¹‰å¿…é¡»æœ‰ `"""` æ–‡æ¡£å­—ç¬¦ä¸²
- **æ—¥å¿—é…ç½®**ï¼šç»Ÿä¸€æ”¾åœ¨ `utils/logging_setup.py`ï¼ŒCLI/Web å¤ç”¨

### é¡¹ç›®ä¾èµ–

#### ä½¿ç”¨ pip å®‰è£…

```bash
pip install -r requirements.txt
```

#### ä½¿ç”¨ conda ç¯å¢ƒ

é¡¹ç›®ä½¿ç”¨çš„ conda ç¯å¢ƒåç§°æ˜¯ï¼š`knowledge_generator`

```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate knowledge_generator

# åœ¨ç¯å¢ƒä¸­å®‰è£…ä¾èµ–
conda run -n knowledge_generator pip install -r requirements.txt
```

### DOCX å¯¼å…¥ä¾èµ–

DOCX å¯¼å…¥ä¾èµ– `pandoc`ï¼Œè¯·ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…ï¼š

```bash
pandoc --version
```

## ğŸ“ˆ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CLI å…¥å£ï¼ˆmain.pyï¼‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ¸å¿ƒç¼–æ’é€»è¾‘ï¼ˆorchestrator.pyï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æºé€‚é…å™¨ï¼ˆdata/source_adapters.pyï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡æ¡£å¤„ç†ï¼ˆfeishu_api.pyï¼‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Markdown è§£æï¼ˆutils/markdown_block_parser.pyï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡æœ¬åˆ†å—ï¼ˆutils/text_chunker.pyï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é£ä¹¦ API é›†æˆï¼ˆintegrations/feishu_api.pyï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“š ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

1. å®‰è£…é¡¹ç›®ä¾èµ–
2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå‚è€ƒ `.env.example`ï¼‰
3. è¿è¡Œå‘½ä»¤å¯¼å…¥æ–‡æ¡£

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹å¸®åŠ©
python main.py -h

# æœ¬åœ°ç›®å½•å¯¼å…¥åˆ°äº‘ç›˜æ–‡ä»¶å¤¹
python main.py --source local --path /path/to/docs --write-mode folder

# GitHub ä»“åº“å¯¼å…¥åˆ°çŸ¥è¯†åº“
python main.py --source github --repo BrenchCC/llm-transformer-book --write-mode wiki --space-name "LLM Transformer" --oauth-local-server

# å¤šè¿›ç¨‹å¯¼å…¥
python main.py --source local --path /path/to/docs --write-mode folder --folder-subdirs --max-workers 3 --chunk-workers 4

# è°ƒè¯•æ¨¡å¼
python main.py --source local --path /path/to/docs --write-mode folder --dry-run --notify-level none
```

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æ”¯æŒæ›´å¤šæ–‡æ¡£æ ¼å¼ï¼ˆPDFï¼‰å¹¶å¢å¼º Word ä¿çœŸå¯¼å…¥
- [ ] å®ç°å¢é‡åŒæ­¥åŠŸèƒ½
- [ ] å¢å¼ºè¡¨æ ¼æ ¼å¼ä¿ç•™
- [ ] ä¼˜åŒ–å›¾ç‰‡ä¸Šä¼ æˆåŠŸç‡
- [ ] æä¾›æ›´å¤šå¯¼å‡ºæ ¼å¼æ”¯æŒ

**ğŸ¤ æ¬¢è¿è´¡çŒ®**ï¼šè¯·å‚è€ƒ CONTRIBUTING.md æ–‡ä»¶ã€‚
